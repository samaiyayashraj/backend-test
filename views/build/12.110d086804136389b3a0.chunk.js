(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{"758059e247e94ffbc8d4":function(e,t,o){"use strict";o.r(t);var n,a=o("8b5525c1e73567369de0"),r=o("b6b89caeec7e2b317aff"),i=o.n(r),s=o("0c7aff4da37dbdff2139"),l=o.n(s),c=o("bd183afcc37eabd79225"),u=o.n(c),d=o("62194bbcb451267ba43e"),p=o.n(d),f=(o("c1aad8b3ec5d7fdbe379"),o("0d939196e59ed73c94e6")),h=o("8af190b70a6bc55c6f1b"),m=o("ab039aecd4a1d4fedc0e"),b=o("e95a63b25fb92ed15721"),g=o("3b0c98878cddf91c2b18"),y=o.n(g),v=o("f53a66fb701477ccb562"),w=o.n(v),S=(o("63f14ac74ce296f77f4d"),Object(m.defineMessages)({pageTitle:{id:"".concat("app.components.LoginPage",".pageTitle"),defaultMessage:"Login"}}),o("776f7b15d44f70e7504d")),O=o.n(S),P=o("307bc763ddd01b6c70af"),k=o("14fe06d809ce8c80d35b"),j=o("b969d5091231687a2b13"),C=o.n(j),N=o("f53db881393abdb56f0f"),T=o.n(N),I=(o("08d58f7c002b05855632"),o("30aa8a25e35667139b51")),M=(o("3870f139cb8c17661166"),o("1e9e8579fe6eef1bce44"));function A(e){return(A="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e,t,o,a){n||(n="function"===typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=a;else if(i>1){for(var s=new Array(i),l=0;l<i;l++)s[l]=arguments[l+3];t.children=s}if(t&&r)for(var c in r)void 0===t[c]&&(t[c]=r[c]);else t||(t=r||{});return{$$typeof:n,type:e,key:void 0===o?null:""+o,ref:null,props:t,_owner:null}}function x(e,t){var o;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(o=function(e,t){if(!e)return;if("string"===typeof e)return G(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);"Object"===o&&e.constructor&&(o=e.constructor.name);if("Map"===o||"Set"===o)return Array.from(e);if("Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return G(e,t)}(e))||t&&e&&"number"===typeof e.length){o&&(e=o);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i=!0,s=!1;return{s:function(){o=e[Symbol.iterator]()},n:function(){var e=o.next();return i=e.done,e},e:function(e){s=!0,r=e},f:function(){try{i||null==o.return||o.return()}finally{if(s)throw r}}}}function G(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,n=new Array(t);o<t;o++)n[o]=e[o];return n}function L(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),o.push.apply(o,n)}return o}function E(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function H(e,t){return(H=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function F(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var o,n=B(e);if(t){var a=B(this).constructor;o=Reflect.construct(n,arguments,a)}else o=n.apply(this,arguments);return function(e,t){if(t&&("object"===A(t)||"function"===typeof t))return t;return R(e)}(this,o)}}function R(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function B(e){return(B=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function D(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var U=_(b.Redirect,{to:"/dashboard"}),q=_(f.Grid,{item:!0,lg:6,xs:12},void 0,_(f.Grid,{className:"accountImage"},void 0,_(P.a,{src:O.a,alt:"logo"}),_("p",{},void 0,"Store and manage digital currencies with ease in the smart and beautiful cryptocurrency wallets."))),V=_(f.Typography,{variant:"h3"},void 0,"Sign In"),z=_(f.Typography,{className:"text",paragraph:!0},void 0,"Please sign in to your account."),$=_(f.Grid,{className:"forgotPassword"},void 0,_(b.Link,{to:"/forgot-password"},void 0,"Forgot Password ?")),J=_(f.Button,{type:"submit",className:"submitButton"},void 0,"Sign In"),K=_(f.Typography,{variant:"h6"},void 0,"Don\u2019t have account ? ",_(b.Link,{to:"/signup"},void 0,"Sign Up")),Q=_("h3",{className:"modalHeading"},void 0,"Please verify your phone number"),Y=_("h3",{className:"modalHeading"},void 0,"Please verify your Otp"),X=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&H(e,t)}(s,h["Component"]);var t,o,n,r=F(s);function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),D(R(t=r.call(this,e)),"handleClickShowPassword",function(e){t.setState(D({},e,!t.state[e]))}),D(R(t),"schema",{email:y.a.string().required().email().error(function(e){return e.forEach(function(e){switch(e.type){case"string.email":e.message="Email Must be Email Format";break;case"any.required":e.message="Email is Requared"}}),e}),password:y.a.string().required().min(8).regex(/^[a-zA-Z0-9]{3,30}$/).error(function(e){return{message:"Please Provide a strong password"}})}),D(R(t),"changeHandler",function(e){var o,n=function(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?L(Object(o),!0).forEach(function(t){D(e,t,o[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):L(Object(o)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))})}return e}({},t.state.error),a=t.validationProperty(e);a?n[e.target.name]=a:delete n[e.target.name],t.setState((D(o={},e.target.name,e.target.value),D(o,"error",n),o))}),D(R(t),"validationProperty",function(e){var o=D({},e.target.name,e.target.value),n=D({},e.target.name,t.schema[e.target.name]),a=y.a.validate(o,n).error;return a?a.details[0].message:null}),D(R(t),"validate",function(){var e={email:t.state.email,password:t.state.password},o=y.a.validate(e,t.schema,{abortEarly:!1}).error;if(!o)return null;var n,a={},r=x(o.details);try{for(r.s();!(n=r.n()).done;){var i=n.value;a[i.path[0]]=i.message}}catch(e){r.e(e)}finally{r.f()}return a}),D(R(t),"submitHandler",function(e){e.preventDefault();var o=t.validate();t.setState({error:o||{}});var n=t.state;n.email,n.password;o||t.loginApi()}),D(R(t),"responseGoogle",function(e){t.socialLogin_api(e,"googleId"),console.log(e)}),D(R(t),"responseFacebook",function(e){t.socialLogin_api(e,"fbId"),console.log(e)}),D(R(t),"responseTwitter",function(e,o){t.socialLogin_api(o,"twitterId"),console.log(o)}),D(R(t),"socialLogin_api",function(e,o){var n;"googleId"==o&&(n={firstName:e.profileObj.givenName,lastName:e.profileObj.familyName,email:e.profileObj.email,profileImage:e.profileObj.imageUrl,social:{key:o,value:e.googleId},country:"",address:"",location:{coordinates:[0,0]},role:2}),"fbId"==o&&(n={firstName:e.name,lastName:"",email:e.email,profileImage:e.picture.data.url,social:{key:o,value:e.id},country:"",address:"",location:{coordinates:[0,0]},role:2}),"twitterId"==o&&(n={firstName:e.screen_name,lastName:"",email:"",profileImage:"",social:{key:o,value:e.user_id},country:"",address:"",location:{coordinates:[0,0]},role:2});var a=R(t),r=R(t),i=R(t);u.a.post("http://54.87.67.93:10010/api/v1/user/social-login",n,{headers:{"Content-Type":"application/json"}}).then(function(e){200==e.data.statusCode&&(0==e.data.data.phoneVerification?(a.setState({authToken:e.data.data.loginToken}),r.onOpenModal()):(w.a.set("Auth",!0),I.toast.success("Successfully login"),i.props.history.push("/dashboard")))}).catch(function(e){console.log(e)})}),D(R(t),"loginApi",function(){var e=R(t),o=R(t),n={email:t.state.email,password:t.state.password};u.a.post("http://54.87.67.93:10010/api/v1/user/login",n,{headers:{"Content-Type":"application/json"}}).then(function(t){console.log(t),200==t.data.statusCode&&(0==t.data.data.phoneVerification?(e.setState({authToken:t.data.data.loginToken}),o.onOpenModal()):(w.a.set("Auth",!0),I.toast.success("Successfully login"),this.props.history.push("/dashboard")))}).catch(function(e){console.log(e)})}),D(R(t),"onOpenModal",function(){t.setState({open:!0}),t.setState({showPhone:!0}),t.setState({showOtp:!1})}),D(R(t),"onCloseModal",function(){t.setState({open:!1})}),D(R(t),"verifyModal",function(){var e=R(t),o=R(t),n={number:t.state.phone,type:"send_otp"},a={headers:{"Content-Type":"application/json",Authorization:t.state.authToken}};u.a.post("http://54.87.67.93:10010/api/v1/user/otp",n,a).then(function(t){200==t.status&&(e.setState({showPhone:!1}),o.setState({showOtp:!0}))}).catch(function(e){console.log(e)})}),D(R(t),"verifyModalotp",function(){var e=R(t),o={number:t.state.otp,type:"verify_otp"},n={headers:{"Content-Type":"application/json",Authorization:t.state.authToken}};u.a.post("http://54.87.67.93:10010/api/v1/user/otp",o,n).then(function(t){console.log("--------",t),200==t.status&&(w.a.set("Auth",!0),I.toast.success("Successfully login"),e.props.history.push("/dashboard"))}).catch(function(e){console.log(e)})}),D(R(t),"handleOnChange",function(e){t.setState({phone:e.target.value})}),D(R(t),"handleOnChangeotp",function(e){t.setState({otp:e.target.value})}),t.state={email:"",password:"",passwordShow:!1,error:{},open:!1,showPhone:!0,showOtp:!1,otp:"",phone:"",authToken:""},t.onOpenModal=t.onOpenModal.bind(R(t)),t.loginApi=t.loginApi.bind(R(t)),t.submitHandler=t.submitHandler.bind(R(t)),t.handleClickShowPassword=t.handleClickShowPassword.bind(R(t)),t.changeHandler=t.changeHandler.bind(R(t)),t.validationProperty=t.validationProperty.bind(R(t)),t.validate=t.validate.bind(R(t)),t.verifyModal=t.verifyModal.bind(R(t)),t.onCloseModal=t.onCloseModal.bind(R(t)),t.handleOnChangeotp=t.handleOnChangeotp.bind(R(t)),t}return t=s,(o=[{key:"t",value:function(e,t){return this.props.intl.formatMessage(e,t)}},{key:"render",value:function(){var e=this,t=this.state,o=t.email,n=t.password,r=t.open,s=(t.showPhone,t.showOtp,t.otp),c=t.phone;t.authToken;return w.a.get("Auth")?(I.toast.info("You are Loged in"),U):_(h.Fragment,{},void 0,_(f.Grid,{className:"accountArea"},void 0,_(f.Grid,{className:"container",container:!0},void 0,q,_(f.Grid,{item:!0,lg:6,xs:12},void 0,_(f.Grid,{className:"accountContent"},void 0,V,z,_(k.a,{onSubmit:this.submitHandler},void 0,_(f.TextField,{label:"Email",className:"inputStyle",name:"email",variant:"outlined",onChange:this.changeHandler,value:o,helperText:this.state.error.email?this.state.error.email:""}),_(f.TextField,{label:"Password",className:"inputStyle",name:"password",variant:"outlined",type:this.state.passwordShow?"text":"password",onChange:this.changeHandler,value:n,InputProps:{endAdornment:_(f.InputAdornment,{className:"showPassword",position:"end"},void 0,_(f.IconButton,{onClick:function(){return e.handleClickShowPassword("passwordShow")}},void 0,_(P.a,{src:this.state.passwordShow?T.a:C.a})))},helperText:this.state.error.password?this.state.error.password:""}),$,J,K,_(f.Grid,{className:"socialLogin"},void 0,_(a.GoogleLogin,{clientId:"129293751237-gd1tmttu4p0o2nl0pfsu1qgv6mspfjt8.apps.googleusercontent.com",buttonText:"Log in with Google",onSuccess:this.responseGoogle,onFailure:this.responseGoogle,cookiePolicy:"single_host_origin"})),_(f.Grid,{className:"socialLogin"},void 0,_(i.a,{appId:"885133891954767",fields:"name,email,picture",callback:this.responseFacebook,textButton:"Log in with Facebook"})),_(f.Grid,{className:"socialLogin"},void 0,_(l.a,{authCallback:this.responseTwitter,consumerKey:"mrVKeG59HbITFtPxhlUgETnr2",consumerSecret:"kfIiSuyUjEMbS1sw8QecpmXw84aoNPt94QrbvscxJmzdesCYaL",callbackUrl:"http://localhost:3006/login"}))),_(M.Modal,{className:"mobileVerification",open:r,onClose:this.onCloseModal,center:!0},void 0,this.state.showPhone?_("div",{className:"modalInput"},void 0,Q,_(p.a,{className:"phonenumberInput",country:"us",value:c,onChange:function(t){return e.setState({phone:t})}}),_(f.Button,{type:"button",onClick:this.verifyModal,className:"submitmodalButton"},void 0,"Submit")):null,this.state.showOtp?_("div",{className:"modalInput"},void 0,Y,_(f.TextField,{label:"Otp",className:"inputStyle verifyInput",name:"otp",variant:"outlined",onChange:this.handleOnChangeotp,value:s}),_(f.Button,{type:"button",onClick:this.verifyModalotp,className:"submitmodalButton"},void 0,"Verify")):null))))))}}])&&E(t.prototype,o),n&&E(t,n),s}();t.default=Object(b.withRouter)(X)}}]);